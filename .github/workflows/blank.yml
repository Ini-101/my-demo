# This is a basic workflow to help you get started with Actions

name: CI
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
jobs:
  run:
    runs-on: ubuntu-latest 
    steps:
      - uses: actions/checkout@v3
      - name: Install git 
        env: 
            PRIVATE_KEY: ${{secrets.PRIVATE_KEY}}
        run: |
          sudo apt-get install -y git
          git --version
          echo "Path is ... $PATH"
      - run: | 
           mkdir ~/.ssh
           chmod 600 id_rsa
           mv id_rsa ~/.ssh/
           mv config ~/.ssh/
           echo $PRIVATE_KEY
           ls
           git config --global user.name 'Ini-effectual'
           git config --global user.email 'ini.inyang@effectual.com'
           git config --get-all remote.origin.fetch
           git config --unset-all remote.origin.fetch
           git config --add remote.origin.fetch +refs/heads/*:refs/heads/*
           git config --add remote.origin.fetch +refs/tags/*:refs/tags/*
           git config --get-all remote.origin.fetch
           git clone --mirror git@github.com:Ini-effectual/my-demo.git
           #cd ~/my-demo         
           #git clone --mirror git@github.com:Ini-effectual/my-test.git          
           git remote update
           #git push --mirror git@github.com:Ini-effectual/my-test.git
